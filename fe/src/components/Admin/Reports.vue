<template>
    <div class="admin-report container py-4">
        <h2 class="mb-4">üìä B√°o c√°o th·ªëng k√™ h·ªá th·ªëng</h2>

        <!-- Th·ªëng k√™ t·ªïng quan -->
        <div class="row mb-4">
            <div class="col-md-4" v-for="stat in stats" :key="stat.title">
                <div class="card shadow-sm text-center p-3">
                    <h5>{{ stat.title }}</h5>
                    <h3 class="text-primary">{{ stat.value }}</h3>
                </div>
            </div>
        </div>

        <!-- Bi·ªÉu ƒë·ªì -->
        <div class="row">
            <div class="col-md-6 mb-4">
                <div class="card p-3 shadow-sm">
                    <h6 class="mb-3">S·ªë l∆∞·ª£ng h·ªçc vi√™n ƒëƒÉng k√Ω theo th√°ng</h6>
                    <canvas id="studentChart"></canvas>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="card p-3 shadow-sm">
                    <h6 class="mb-3">T·ª∑ l·ªá H·ªçc vi√™n / Gi·∫£ng vi√™n</h6>
                    <canvas id="userPieChart"></canvas>
                </div>
            </div>
            <div class="col-md-12 mb-4">
                <div class="card p-3 shadow-sm">
                    <h6 class="mb-3">Doanh thu theo th√°ng</h6>
                    <canvas id="revenueChart"></canvas>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
import { onMounted, ref } from "vue";
import Chart from "chart.js/auto";

export default {
    name: "AdminReport",
    setup() {
        const stats = ref([
            { title: "üë• Ng∆∞·ªùi d√πng", value: 1520 },
            { title: "üìö Kh√≥a h·ªçc", value: 230 },
            { title: "üí∞ Doanh thu (VNƒê)", value: "120,000,000" },
        ]);

        onMounted(() => {
            // Bi·ªÉu ƒë·ªì c·ªôt - H·ªçc vi√™n theo th√°ng
            new Chart(document.getElementById("studentChart"), {
                type: "bar",
                data: {
                    labels: ["Th1", "Th2", "Th3", "Th4", "Th5", "Th6"],
                    datasets: [
                        {
                            label: "H·ªçc vi√™n m·ªõi",
                            data: [120, 150, 200, 180, 220, 300],
                            backgroundColor: "#42A5F5",
                        },
                    ],
                },
            });

            // Bi·ªÉu ƒë·ªì tr√≤n - T·ª∑ l·ªá User
            new Chart(document.getElementById("userPieChart"), {
                type: "pie",
                data: {
                    labels: ["H·ªçc vi√™n", "Gi·∫£ng vi√™n"],
                    datasets: [
                        {
                            data: [1300, 220],
                            backgroundColor: ["#66BB6A", "#FFA726"],
                        },
                    ],
                },
            });

            // Bi·ªÉu ƒë·ªì ƒë∆∞·ªùng - Doanh thu
            new Chart(document.getElementById("revenueChart"), {
                type: "line",
                data: {
                    labels: ["Th1", "Th2", "Th3", "Th4", "Th5", "Th6"],
                    datasets: [
                        {
                            label: "Doanh thu (VNƒê)",
                            data: [15000000, 20000000, 25000000, 18000000, 30000000, 35000000],
                            borderColor: "#EF5350",
                            fill: false,
                        },
                    ],
                },
            });
        });

        return { stats };
    },
};
</script>

<style scoped>
.admin-report {
    max-width: 1200px;
}

.card {
    border-radius: 12px;
}
</style>
